@model CategoriesIndexViewModel
@{ ViewData["Title"] = Model.PageTitle; }

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-xl">@ViewData["Title"]</h1>
        <p class="govuk-body-l">@Model.PageDescription</p>

        @if (Model.CategoryTypes.Any())
        {
            <ul class="dfe-chevron-card__list">
                @foreach (var categoryType in Model.CategoryTypes)
                {
                    <li class="dfe-chevron-card">
                        <div class="dfe-chevron-card__wrapper">
                            <h2 class="govuk-heading-s govuk-!-margin-bottom-2">
                                <a class="govuk-link govuk-link--no-visited-state" href="/categories/@categoryType.Slug">
                                    @categoryType.Name
                                </a>
                            </h2>
                            @if (!string.IsNullOrEmpty(categoryType.Description))
                            {
                                <p class="dfe-chevron-card__description govuk-body govuk-body-s">@categoryType.Description</p>
                            }
                            @if (categoryType.MultiLevel)
                            {
                                var rootCount = categoryType.Values?.Where(v => v.Parent == null).Count() ?? 0;
                                <p class="govuk-body-s govuk-!-margin-bottom-0">@rootCount main categories</p>
                            }
                            else
                            {
                                <p class="govuk-body-s govuk-!-margin-bottom-0">@(categoryType.Values?.Count ?? 0) options</p>
                            }
                            
                            <a class="dfe-chevron-card__link" href="/categories/@categoryType.Slug" aria-hidden="true" tabindex="-1">
                                <span class="govuk-visually-hidden">@categoryType.Name</span>
                            </a>
                        </div>
                    </li>
                }
            </ul>
        }
        else
        {
            <div class="govuk-inset-text">
                <p>No categories are currently available.</p>
            </div>
        }
    </div>
</div>
